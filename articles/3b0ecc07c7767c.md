---
title: "TypeScript ã§å‹å¼•æ•°ã‚’éƒ¨åˆ†çš„ã«æŒ‡å®šã—ãŸã„"
emoji: "ğŸˆâ€â¬›"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["typescript"]
published: true
---

## ã¯ã˜ã‚ã«

TypeScript ã§ã¯é–¢æ•°å‘¼ã³å‡ºã—æ™‚ã« 1 ã¤ä»¥ä¸Šã®å‹å¼•æ•°ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹å ´åˆã€ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã§ãªã„ã™ã¹ã¦ã®å‹å¼•æ•°ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```ts
function func<T, U>(value1: T, value2: U): [T, U] {
  return [value1, value2];
}

// OK
const result1 = func("foo", 42);
const result2 = func<string, number>("foo", 42);

// ERROR: Expected 2 type arguments, but got 1.
const result3 = func<string>("foo", 42);

// ã“ã‚Œã¯ OK
function func2<T, U = number>(value1: T, value2: U): [T, U] {
  return [value1, value2];
}
const result4 = func2<string>("foo", 42);
```

å‹å¼•æ•°ã‚’æŒ‡å®šã—ãªã„å ´åˆã«ã¯ `string` å‹ã¨ `number` å‹ã«æ¨è«–ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ã€`result3` ã®ã‚ˆã†ãªå ´åˆã«ã‚‚æ¨è«–ã•ã‚Œã¦ã»ã—ã„ã§ã™ã€‚ã“ã®ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã«æ¨è«–ã—ã¦ã‚‚ã‚‰ã†æ–¹æ³•ã‚’è€ƒãˆã¾ã™ã€‚

## è§£æ±ºç­–

é–¢æ•°ã‚’ã‚«ãƒªãƒ¼åŒ–ã—ï¼ˆå‹ï¼‰å¼•æ•°ã‚’ 1 ã¤ãšã¤å—ã‘å–ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```ts
function func<T>(value1: T): <U>(value2: U) => [T, U] {
  return (value2) => [value1, value2];
}
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€æ¬¡ã®ã‚ˆã†ã«å‹å¼•æ•°ã‚’éƒ¨åˆ†çš„ã«æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```ts
const result1 = func<string>("foo")(42);
// typeof result1 => [string, number]

// OK
const result2 = func("foo")(42);
const result3 = func("foo")<number>(42);
const result4 = func<string>("foo")<number>(42);

// ERROR
const result5 = func<number>("foo")(42);
const result6 = func<string>("foo")<boolean>(42);
```

## æ´»ç”¨ä¾‹

ã‚ã‚‹å‹ã‚’æº€ãŸã™å€¤ã‚’ä½œã‚ŠãŸã„ãŒã€ãã®å‹ã«ã‚¢ãƒƒãƒ—ã‚­ãƒ£ã‚¹ãƒˆã•ã‚Œã¦ã»ã—ããªã„å ´åˆã‚’è€ƒãˆã¾ã™ã€‚

```ts
type User = {
  name: string;
  age: number;
};

// ä¸Šè¨˜ã® User å‹ã‚’æº€ãŸã™å€¤ã‚’å®£è¨€ã—ãŸã„ãŒã€User å‹ã«ã‚¢ãƒƒãƒ—ã‚­ãƒ£ã‚¹ãƒˆã•ã‚Œã¦ã»ã—ããªã„
const user: User = {
  name: "foo" as const,
  age: 42,
};

// typeof user => User
// æœ¬å½“ã¯ { name: "foo"; age: number } ã¨ã„ã†å‹ã§æ¬²ã—ã„
```

ã“ã‚Œã‚’å›é¿ã—ãŸã„å ´åˆã€æ¬¡ã®ã‚ˆã†ã«ã‚ã‚‰ã‹ã˜ã‚å€¤ã‚’å®£è¨€ã—ã¦ãŠãç›®çš„ã®å‹ã®å¤‰æ•°ã«ä»£å…¥ã™ã‚‹ãªã©ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚‹ã“ã¨ã§å‹ã‚’æº€ãŸã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ãŒã€ã‚¨ãƒ©ãƒ¼ã«ã™ãæ°—ã¥ã‘ãªã‹ã£ãŸã‚Šã€å®£è¨€æ™‚ã«è£œå®ŒãŒåŠ¹ã‹ãªã‹ã£ãŸã‚Šã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚„ ESLint ã®è¨­å®šã«ã‚ˆã£ã¦ã¯æœªä½¿ç”¨ã®å¤‰æ•°ã‚„å¼•æ•°ã€å‹ã®å®£è¨€ãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚

```ts
const user = {
  name: "foo" as const,
  aga: 42, // aga ã§ã¯ãªã age ã ãŒã€ã“ã“ã§ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
};

// æ–¹æ³• 1
const check: User = user;

// æ–¹æ³• 2
function check<T>(value: T): void {
  return;
}
check<User>(user);

// æ–¹æ³• 3
type Expect<T extends true> = T;
type Check = Expect<typeof user extends User ? true : false>;
```

æ¬¡ã®ã‚ˆã†ãªæ–¹æ³•ã‚‚è€ƒãˆã‚‰ã‚Œã¾ã™ãŒã€ã“ã‚Œã¯å…ˆè¿°ã®é€šã‚Šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

```ts
function typing<T, U extends T>(value: U): U {
  return value;
}

// ERROR: Expected 2 type arguments, but got 1.
const user = typing<User>({
  name: "foo" as const,
  age: 42,
});
```

ã“ã“ã§ä¸Šè¨˜ã®é–¢æ•°ã‚’æ¬¡ã®ã‚ˆã†ã«ã‚«ãƒªãƒ¼åŒ–ã—ã¾ã™ã€‚

```ts
function typing<T>(): <U extends T>(value: U) => U {
  return (value) => value;
}
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€å…ˆè¿°ã®å•é¡Œã‚’è§£æ±ºã—ãªãŒã‚‰ `User` å‹ã‚’æº€ãŸã™å€¤ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```ts
const user1 = typing<User>()({
  name: "foo" as const,
  age: 42,
});
// typeof user => { name: "foo"; age: number }

// ERROR
const user2 = typing<User>()({
  name: "foo" as const,
  aga: 42, // 'aga' does not exist in type 'User'.
});
const user3 = typing<User>()({
  name: "foo" as const,
  age: true, // Type 'boolean' is not assignable to type 'number'.
});
```

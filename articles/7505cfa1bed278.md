---
title: label ã§ input[type="file"] ã‚’è£…é£¾ã™ã‚‹ãª
emoji: "ğŸ“„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£", "html"]
published: true
---

`input[type="file"]` ãªè¦ç´ ã‚’è£…é£¾ã™ã‚‹æ–¹æ³•ã‚’æ¤œç´¢ã—ãŸã¨ãã«ã€æ¬¡ã®ã‚ˆã†ãª `label` è¦ç´ ã‚’ä½¿ã†æ–¹æ³•ã°ã‹ã‚Šãƒ’ãƒƒãƒˆã™ã‚‹ã®ãŒæ°—ã«ãªã£ãŸã®ã§æ›¸ãã¾ã—ãŸã€‚

```html
<label>
  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
  <input type="file" />
</label>
```

```css
label {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

## ä½•ãŒå•é¡Œã‹

ä¸Šè¨˜ã®æ–¹æ³•ã¯ `input` è¦ç´ ã‚’ `display: none` ã§éè¡¨ç¤ºã«ã—ã€`label` è¦ç´ ã‚’ä½¿ã£ã¦ãƒ’ãƒƒãƒˆé ˜åŸŸã‚’æ‹¡å¤§ã•ã›ã¦ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¾ã™ã‚‹ã¨ã„ã†æ–¹æ³•ã§ã™ãŒã€ã“ã®æ–¹æ³•ã§ã¯**ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå½“ãŸã‚Šã¾ã›ã‚“**ã€‚ã¾ãŸã€`tabindex` å±æ€§ã«éè² ã®å€¤ã‚’è¨­å®šã—ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã‚‚ `label` ã¯ clickable ãªè¦ç´ ã§ã¯ãªã„ã®ã§ **Space / Enter ã‚­ãƒ¼ã§ click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“**ã€‚

## ã©ã†ã™ã‚‹ã¹ãã‹

`button` è¦ç´ ã‚’ä½¿ã„ã€ã‚¯ãƒªãƒƒã‚¯æ™‚ã« `input` è¦ç´ ã® click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã¾ã—ã‚‡ã†ã€‚`input` è¦ç´ ã®ä»£ã‚ã‚Šã« [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API) ã‚’ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€åŸ·ç­†æ™‚ç‚¹ã§ã¯å¯¾å¿œã—ã¦ã„ãªã„ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚ã‚‹ã®ã§ä½¿ã‚ãªã„ã»ã†ãŒç„¡é›£ã§ã™ã€‚

<!-- prettier-ignore -->
```html
<button>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
<input type="file" />
```

```js
document.querySelector("button").addEventListener("click", () => {
  document.querySelector("input").click();
});
```

```css
button {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

`button` è¦ç´ ã‚’ä½¿ã†ã®ãŒé©åˆ‡ã§ãªã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é…æ…®ã—ãŸãƒœã‚¿ãƒ³ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚

```html
<div role="button" tabindex="0">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</div>
<input type="file" />
```

```js
const buttonElement = document.querySelector("div");

buttonElement.addEventListener("click", () => {
  document.querySelector("input").click();
});

// Space / Enter ã‚­ãƒ¼ã§ click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
buttonElement.addEventListener("keydown", (event) => {
  if (!buttonElement.isEqualNode(event.target)) {
    return;
  }

  if (event.keyCode === 32 || event.keyCode === 13) {
    event.preventDefault();
    document.querySelector("input").click();
  }
});
```

```css
div {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

## å‚è€ƒ

- [WAI-ARIA Authoring Practices 1.2](https://www.w3.org/TR/wai-aria-practices/#button)
- [react-dropzone](https://github.com/react-dropzone/react-dropzone)

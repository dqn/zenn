---
title: label ã§ input[type="file"] ã‚’è£…é£¾ã™ã‚‹ãª
emoji: "ğŸ“„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£", "html"]
published: true
---

:::message alert

ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é…æ…®ã•ã‚Œã¦ã„ã‚Œã° `label` è¦ç´ ã‚’ä½¿ã£ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚

:::

`input[type="file"]` ãªè¦ç´ ã‚’è£…é£¾ã™ã‚‹æ–¹æ³•ã‚’æ¤œç´¢ã—ãŸã¨ãã«ã€æ¬¡ã®ã‚ˆã†ãªé–“é•ã£ãŸ `label` è¦ç´ ã®ä½¿ã„æ–¹ã‚’ç´¹ä»‹ã™ã‚‹è¨˜äº‹ã°ã‹ã‚Šãƒ’ãƒƒãƒˆã™ã‚‹ã®ãŒæ°—ã«ãªã£ãŸã®ã§æ›¸ãã¾ã—ãŸã€‚

```html
<label>
  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
  <input type="file" />
</label>
```

```css
label {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

## ä½•ãŒå•é¡Œã‹

ä¸Šè¨˜ã®æ–¹æ³•ã¯ `input` è¦ç´ ã‚’ `display: none` ã§éè¡¨ç¤ºã«ã—ã€`label` è¦ç´ ã‚’ä½¿ã£ã¦ãƒ’ãƒƒãƒˆé ˜åŸŸã‚’æ‹¡å¤§ã•ã›ã¦ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¾ã™ã‚‹ã¨ã„ã†æ–¹æ³•ã§ã™ãŒã€ã“ã®æ–¹æ³•ã§ã¯**ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå½“ãŸã‚Šã¾ã›ã‚“**ã€‚ã¾ãŸã€`tabindex` å±æ€§ã«éè² ã®å€¤ã‚’è¨­å®šã—ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã‚‚ `label` ã¯ clickable ãªè¦ç´ ã§ã¯ãªã„ã®ã§ **Space / Enter ã‚­ãƒ¼ã§ click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“**ã€‚

## ã©ã†ã™ã‚‹ã¹ãã‹

`button` è¦ç´ ã‚’ä½¿ã„ã€ã‚¯ãƒªãƒƒã‚¯æ™‚ã« `input` è¦ç´ ã® click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã‚‹æ–¹æ³•ãŒä½¿ãˆã¾ã™ã€‚ã“ã®æ–¹æ³•ã¯ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šã«æ³¨åŠ›ã—ã¦ã„ã‚‹[^1] Twitter ã‚„ã€React ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®å…¥åŠ›ã‚’æ‰±ã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ [react-dropzone](https://github.com/react-dropzone/react-dropzone) ãªã©ã§ã‚‚ä½¿ã‚ã‚Œã¦ãŠã‚Šã€[MDN ã®è¨˜äº‹](https://developer.mozilla.org/ja/docs/Web/API/File/Using_files_from_web_applications#click_%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E9%9D%9E%E8%A1%A8%E7%A4%BA%E3%81%AE_input_%E8%A6%81%E7%B4%A0%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B)ã§ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»–ã«ã‚‚æ–¹æ³•ã¯ã‚ã‚Šã¾ã™ãŒã€æœ¬è³ªã§ã¯ãªã„ã®ã§æœ¬è¨˜äº‹ã§ã¯å–ã‚Šæ‰±ã„ã¾ã›ã‚“ã€‚

<!-- prettier-ignore -->
```html
<button>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</button>
<input type="file" />
```

```js
document.querySelector("button").addEventListener("click", () => {
  document.querySelector("input").click();
});
```

```css
button {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

`button` è¦ç´ ã‚’ä½¿ã†ã®ãŒé©åˆ‡ã§ãªã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é…æ…®ã—ãŸãƒœã‚¿ãƒ³ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚

```html
<div role="button" tabindex="0">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</div>
<input type="file" />
```

```js
const buttonElement = document.querySelector("div");

buttonElement.addEventListener("click", () => {
  document.querySelector("input").click();
});

// Space / Enter ã‚­ãƒ¼ã§ click ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
buttonElement.addEventListener("keydown", (event) => {
  if (!buttonElement.isEqualNode(event.target)) {
    return;
  }

  if (event.keyCode === 32 || event.keyCode === 13) {
    event.preventDefault();
    document.querySelector("input").click();
  }
});
```

```css
div {
  /* è£…é£¾ */
}

input {
  display: none;
}
```

## å‚è€ƒ

- [WAI-ARIA Authoring Practices 1.2](https://www.w3.org/TR/wai-aria-practices/#button)
- [react-dropzone](https://github.com/react-dropzone/react-dropzone)

[^1]: [Twitter ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ©Ÿèƒ½](https://help.twitter.com/ja/using-twitter/accessibility-features)
